# 浅谈指针和引用

## 初始化
   在谈论指针和引用之前，需要了解什么是初始化,可以把内存分为堆（stack）和栈（heap）。函数局部变量的存储单元在栈上创建，这是由程序自动分配，堆是由程序员申请，并指明大小。
   
   在java中所谓初始化，就是在堆创建一个对象，在栈中创建一个引用变量。该引用变量存储的内容是对象地址，类似于C++ 指针。我们可以这么理解，引用是访问对象的根本方式。如果想访问对象本身，需要根据对象的引用访问。
   
   而️C+ +中，使用mollac给堆分配内存单元，并且通过free释放。如果需要使用该对象，那么需要自定义存储该对象地址的指针。对于C++，一个类的创建意味着，创建对象的同时，创建指针和引用。
   如下所示，相当于创建一个类，同时执行两次构造函数和析构函数。对于效率是很有影响的。
   
```sh
Class A{
    A(){cout<<"create class A";}
    ~A(){count<<"delate class A";}
}

```
## 指针和引用
 通过上一节知道了，指针存储对象的地址；引用相当于一个别名。

在具体函数使用的时候，传入参数为引用，意味着在相同的内存区域执行，并不需要重新构造新的对象。但是如果传入引用，则需要初始化一个新的对象。后者的效率远不如前者。

就存取效率而言，栈上的数组比指针指向的数组更快，可以看下面代码：
```sh
＃include
void main() {
    char a = 1;
    char c[] = "1234567890";//在运行时赋值----1
    char *p ="1234567890";//在编译时赋值----2
    a = c[1];
    a = p[1];
    return;
}
 ```
 在汇编语言中，语句1直接把元素读取到寄存器cl中，但是语句2将指针值读到edx中，在根据edx读取字符。
 
 
   
## 碎片内存的回收
   在java中，对于没有引用指向的对象，GC会通过特定算法回收，详情见“浅谈垃圾回收机制”。
